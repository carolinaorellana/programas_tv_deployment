<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--Link Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Programas de TV</title>
</head>
<body>
    <main class="container my-5 bg-light p-4">
        <h1>Bienvenid@ {{session['usuario_nombre']}}!</h1>
        <header class="row align-items-center">
            <div class="col-8">
                <h2 >Todos los programas de TV:</h2>
            </div>
            <nav class="col-4 d-flex justify-content-between p-4 ">
                <a href="/programas/nuevo">+ Crear Programa </a>
                <a href="/cerrar_sesión">Cerrar Sesión</a>
            </nav>
        </header>
        <table class="table table-striped">
            <tr>
                <th>Titulo</th>
                <th>Canal de TV</th>
                <th>Fecha de transmisión</th>
                <th>Acciones</th>
            </tr>
            {% for programa in todos_los_programas: %}
            <tr>
                <td>{{programa.titulo}}</td>
                <!--Teniendo los dos datos en conjunto del nombre-->
                <td>{{programa.usuario[0].nombre}} {{programa.usuario[0].apellido}}</td>
                <td>{{programa.fecha}}</td>
                <!--MOSTRAR ACCIONES SEGUN SESION ID-->
                {% if session['usuario_id'] == programa['usuario_id']:%}
                    <td>
                        <a href="/programas/ver/{{programa['id']}}">VER</a> |
                        <a href="/programas/editar/{{programa['id']}}"> EDITAR </a> |
                        <a href="/programas/eliminar/{{programa['id']}}"> ELIMINAR </a>
                    </td>
                {% else: %}
                    <td>
                        <a href="/programas/ver/{{programa['id']}}">VER</a>
                    </td>
                {% endif %}                    
            </tr>
        {% endfor %}
        </table>
    </main>
    <!--Link Boostrap-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>  
</body>
</html>